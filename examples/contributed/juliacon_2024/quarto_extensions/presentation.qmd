---
title: Quarto Extensions
subtitle: for the Julia Community
format:
  julia-revealjs:
    scrollable: true
date: July 12, 2024
execute:
  eval: false
---

# Overview {.nostretch} 

::::{.columns}::::
:::{.column width='50%'}
1. What is Quarto?
2. [Julia-themed Quarto: Simple Extensions](#sec-simple)
3. Quarto for Documentation
4. Quarto for JuliaCon Proceedings
:::
:::{.column width='50%'}
![](www/poster.png){fig-align="center" height="400"}
:::
::::

# Julia-themed Quarto {#sec-simple .nostretch} 

![](www/julia_quarto.gif){fig-align="center"}

# Documentation {#sec-docs}

## Goals

Tutorials that are

-  integrated in the documentation ([`Documenter.jl`](https://documenter.juliadocs.org/stable/))
   - Integrated Links within the documentation
   - include mathematical formulae
- render into Markdown

. . .

- show code and results
- reproducible
- run on CI (cached)

## General Workflow

- write tutorials (`.qmd`) for a package in `tutorials/`
- run them when generating the documentation
- should render them into `docs/src/tutorials/` (as `.md`)

### An Example

````{markdown}
---
title: "A short example"
---

```{{julia}}
#| echo: false
#| code-fold: true
#| output: false
cd(@__DIR__);
using Pkg; Pkg.activate("."); # oen reproducible environment
```

First, load all necessary packages

```{{julia}}
using Manopt, Manifolds
M = Sphere(2)
```
````

## Workflow II: Quarto

Put a `_quarto.yml` file in `tutorials/` with

```{YAML}
project:
  title: "My Tutorials"
  output-dir: ../docs/src/tutorials
  render:
    - "*.qmd"
    - "!NotThisFile.qmd"
```

Last line: Exclude for example benchmark from general runs.

. . .

- `quarto render filename.qmd` to render a certain one
- `quarto render` in `tutorials/` to generate aøø but the `!`-excluded ones
- `tutorials/_freeze` is a Cache: only renders if file has been changed.

. . .

### Tipp

Use the [Quarto VS Code extension](https://marketplace.visualstudio.com/items?itemName=quarto.quarto) and `Quarto Preview` while writing a tutorial


## Workflow III: Documenter

* Use `CondaPkg.jl` to handle/install Python, creating a `CondaPkg.toml` specifying the Python version

```{toml}
[deps]
jupyter = ""
python = "3.11"
```

And include rendering the tutorials in your `make.jl`

````{{julia}}
using CondaPkg
CondaPkg.withenv() do
    tutorials_folder = (@__DIR__) * "/../tutorials"
    run(`quarto render $(tutorials_folder)`)
end
````



## Workflow IV: GitHub Action

````{.yaml}
- name: Cache Quarto
  uses: actions/cache@v4
  with:
    path: tutorials/_freeze
    key: ${{ runner.os }}-${{ env.cache-name }}-${{ hashFiles('tutorials/*.qmd') }}
    restore-keys: |
      ${{ runner.os }}-${{ env.cache-name }}-
- name: Cache Documenter
  uses: actions/cache@v4
  with:
    path: docs/src/tutorials
    key: ${{ runner.os }}-${{ env.cache-name }}-${{ hashFiles('tutorials/*.qmd') }}
    restore-keys: |
      ${{ runner.os }}-${{ env.cache-name }}-
````

This sets up Caches for the folders

- `docs/src/tutorials` rendered Markdown files
- `tutorials/_freeze` Quarto Cache
- one could also cache `docs/.CondaPkg` to reduce loading Python packages

. . .

#### There we are!

Cached, reproducible Tutorials that integrate with `Documenter.jl`.


## Comments

Running `make.jl` from shell, one can

- (de)activate running Quarto
- (de)activate generting the tutorials menu (locally)
- clear cache

. . .

### Challenges

- Cache vs. breaking versions of the package
- Recommendation: Maybe print Package versions
- Quarto replaces spaces in markdown links ``[A](@ref B)`` with ``[A](@ref%20B)``.

  These have to be “escaped” ``` `[A](@ref B)`{=commonmark} ``` to stay unmodified
- Due to pandoc: for now write math in `$...$` and not ``` ``...`` ```

## Summary

Quarto notebooks allow for an easy way to have tutorials

- executed code
- reproducible
- cached and rendered on CI
- inegrated (with `@ref` links in `Documenter.jl`)
- citing (with `[citekey](@cite)` and [`DocumenterCitations.jl`](https://github.com/JuliaDocs/DocumenterCitations.jl))
- extended referencing (`@extref` and [`DocumenterInterLinks.jl`](https://github.com/JuliaDocs/DocumenterInterLinks.jl))

See [Manopt.jl: Optimize](https://manoptjl.org/stable/tutorials/Optimize/) for a full example, rendered from
[here](https://github.com/JuliaManifolds/Manopt.jl/blob/master/tutorials/Optimize.qmd)

. . .

### Soon

- the [`QuartoNotebookRunner.jl`](https://github.com/PumasAI/QuartoNotebookRunner.jl)
  should provide native rendering in pure Julia
- Pluto notebooks might be used as [input there as well](https://github.com/PumasAI/QuartoNotebookRunner.jl/issues/125)
